!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/forms"),require("@ngrx/store"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("ngrx-form",["exports","@angular/core","@angular/forms","@ngrx/store","rxjs","rxjs/operators"],e):e(t["ngrx-form"]={},t.ng.core,t.ng.forms,t.store,t.rxjs,t.Rx.Observable.prototype)}(this,function(t,e,r,o,i,a){"use strict";var s={UpdateStatus:"[Form] Update Status",UpdateValue:"[Form] Update Value",UpdateDirty:"[Form] Update Dirty",SetDirty:"[Form] Set Dirty",SetPrestine:"[Form] Set Prestine",UpdateErrors:"[Form] Update Errors",SetDisabled:"[Form] Disable Form",SetEnabled:"[Form] Enable Form",UpdateForm:"[Form] Update Form"},p=function D(t){this.payload=t,this.type=s.UpdateStatus},n=function g(t){this.payload=t,this.type=s.UpdateValue},d=function U(t){this.payload=t,this.type=s.UpdateForm},u=function v(t){this.payload=t,this.type=s.UpdateDirty},c=function S(t){this.payload=t,this.type=s.SetDirty},y=function x(t){this.payload=t,this.type=s.SetPrestine},l=function k(t){this.payload=t,this.type=s.UpdateErrors},m=function G(t){this.payload=t,this.type=s.SetDisabled},h=function j(t){this.payload=t,this.type=s.SetEnabled},f=function(t,e,r){t=Object.assign({},t);var o=e.split("."),i=o[o.length-1];return o.reduce(function(t,e){return t[e]=e===i?r:Object.assign({},t[e]),t&&t[e]},t),t};var b=function(t,e){return e.split(".").reduce(function(t,e){return t&&t[e]},t)},F=function(){function t(t,e,r){this._store=t,this._formGroupDirective=e,this._cd=r,this.debounce=100,this._destroy$=new i.Subject,this._updating=!1}return t.prototype.ngOnInit=function(){var e=this;this._store.select(function(t){return b(t,e.path+".model")}).pipe(a.takeUntil(this._destroy$)).subscribe(function(t){e._updating||(e._updating=!1,t&&(e._formGroupDirective.form.patchValue(t),e._cd.markForCheck()))}),this._store.select(function(t){return b(t,e.path+".dirty")}).pipe(a.takeUntil(this._destroy$)).subscribe(function(t){e._formGroupDirective.form.dirty!==t&&(!0===t?(e._formGroupDirective.form.markAsDirty(),e._cd.markForCheck()):!1===t&&(e._formGroupDirective.form.markAsPristine(),e._cd.markForCheck()))}),this._store.select(function(t){return b(t,e.path+".disabled")}).pipe(a.takeUntil(this._destroy$)).subscribe(function(t){e._formGroupDirective.form.disabled!==t&&(!0===t?(e._formGroupDirective.form.disable(),e._cd.markForCheck()):!1===t&&(e._formGroupDirective.form.enable(),e._cd.markForCheck()))}),this._formGroupDirective.valueChanges.pipe(a.debounceTime(this.debounce),a.takeUntil(this._destroy$)).subscribe(function(t){e._updating=!0,e._store.dispatch(new n({path:e.path,value:t})),e._store.dispatch(new u({path:e.path,dirty:e._formGroupDirective.dirty})),e._store.dispatch(new l({path:e.path,errors:e._formGroupDirective.errors}))}),this._formGroupDirective.statusChanges.pipe(a.debounceTime(this.debounce),a.takeUntil(this._destroy$)).subscribe(function(t){e._store.dispatch(new p({path:e.path,status:t}))})},t.prototype.ngOnDestroy=function(){this._destroy$.next(),this._destroy$.complete(),this.clearDestroy&&this._store.dispatch(new d({path:this.path,value:null,dirty:null,status:null,errors:null}))},t}();F.decorators=[{type:e.Directive,args:[{selector:"[ngrxForm]"}]}],F.ctorParameters=function(){return[{type:o.Store},{type:r.FormGroupDirective},{type:e.ChangeDetectorRef}]},F.propDecorators={path:[{type:e.Input,args:["ngrxForm"]}],debounce:[{type:e.Input,args:["ngrxFormDebounce"]}],clearDestroy:[{type:e.Input,args:["ngrxFormClearOnDestroy"]}]};var _=function E(){};_.decorators=[{type:e.NgModule,args:[{imports:[r.ReactiveFormsModule,o.StoreModule],declarations:[F],exports:[F]}]}],t.form=function C(o){return function(t,e){var r=o(t,e);return e.type!==s.UpdateValue&&e.type!==s.UpdateForm||(r=f(r,e.payload.path+".model",Object.assign({},e.payload.value))),e.type!==s.UpdateStatus&&e.type!==s.UpdateForm||(r=f(r,e.payload.path+".status",e.payload.status)),e.type!==s.UpdateErrors&&e.type!==s.UpdateForm||(r=f(r,e.payload.path+".errors",Object.assign({},e.payload.errors))),e.type!==s.UpdateDirty&&e.type!==s.UpdateForm||(r=f(r,e.payload.path+".dirty",e.payload.dirty)),e.type===s.SetDirty&&(r=f(r,e.payload+".dirty",!0)),e.type===s.SetPrestine&&(r=f(r,e.payload+".dirty",!1)),e.type===s.SetDisabled&&(r=f(r,e.payload+".disabled",!0)),e.type===s.SetEnabled&&(r=f(r,e.payload+".disabled",!1)),r}},t.NgrxFormModule=_,t.FormDirective=F,t.FormActions=s,t.UpdateFormStatus=p,t.UpdateFormValue=n,t.UpdateForm=d,t.UpdateFormDirty=u,t.SetFormDirty=c,t.SetFormPristine=y,t.UpdateFormErrors=l,t.SetFormDisabled=m,t.SetFormEnabled=h,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ngrx-form.umd.min.js.map
